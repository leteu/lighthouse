"use strict";(self["webpackChunkchat_quasar"]=self["webpackChunkchat_quasar"]||[]).push([[64],{29:(e,t,o)=>{o.r(t),o.d(t,{default:()=>D});var a=o(3673),l=o(2323),s=o(8880);const r={class:"q-pa-lg q-gutter-y-sm column full-height"},n={class:"flex justify-between items-center"},i={class:"text-h6 text-primary"},d={class:"flex items-center justify-start q-gutter-x-sm"},u=(0,a._)("span",{class:"text-bold q-mr-sm"},"접속자 : ",-1),c={key:0,class:"text-center"},m={class:"text-grey-6 fs-85"},p={class:"text-bold"},h={class:"small-font"},v={class:"text-bold q-mr-sm"},f={class:"text-grey-8 fs-85"},g={class:"word_warp"},w={class:"row"},b={class:"relative-position col"};function y(e,t,o,y,q,S){var _;const k=(0,a.up)("q-item-section"),$=(0,a.up)("q-item"),x=(0,a.up)("q-list"),C=(0,a.up)("q-menu"),Z=(0,a.up)("q-btn"),I=(0,a.up)("q-card-section"),W=(0,a.up)("q-card"),M=(0,a.up)("IMEInput"),L=(0,a.up)("q-form");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("div",n,[(0,a._)("div",i,(0,l.zw)(null===(_=e.$store.getters["StompModule/getCurrentRoomName"])||void 0===_?void 0:_.name),1),(0,a._)("div",d,[(0,a.Wm)(Z,{dense:"",outline:"",icon:"people"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{class:"width-150px"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{dense:"",bordered:"",separator:""},{default:(0,a.w5)((()=>[(0,a.Wm)($,{dense:""},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{class:"flex items-center justify-start"},{default:(0,a.w5)((()=>[(0,a._)("span",null,[u,(0,a.Uk)((0,l.zw)(e.userInfo.length),1)])])),_:1})])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.userInfo,((e,t)=>((0,a.wg)(),(0,a.j4)($,{key:`user-${t}`,dense:""},{default:(0,a.w5)((()=>[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.userName),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),(0,a.Wm)(Z,{dense:"",outline:"",icon:"clear",onClick:t[0]||(t[0]=()=>{e.$router.push("/")})})])]),(0,a.Wm)(W,{flat:"",square:"",bordered:"",class:"col"},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{class:"q-py-xs scroll-y full-height chat-box"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.dataList,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"relative-position q-my-xs",key:`chat-${t}`},["notice"===e.authority?((0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",m,[(0,a._)("span",p,(0,l.zw)(e.userName),1),(0,a.Uk)(" "+(0,l.zw)(e.messageContent),1)])])):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a._)("div",h,[(0,a._)("span",v,(0,l.zw)(e.userName),1),(0,a._)("span",f,(0,l.zw)(e.date),1)]),(0,a._)("div",g,(0,l.zw)(e.messageContent),1)],64))])))),128))])),_:1})])),_:1}),(0,a._)("div",w,[(0,a._)("div",b,[(0,a.Wm)(L,{ref:"messageForm"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{outlined:"",modelValue:e.message,"onUpdate:modelValue":t[1]||(t[1]=t=>e.message=t),dense:"",square:"",type:"textarea",onKeydown:t[2]||(t[2]=(0,s.D2)((t=>{t.shiftKey||(t.preventDefault(),e.onClickSend())}),["enter"])),row:"2",rules:[e=>!!e&&!!e.trim()||""],class:"hideErrorMessageSlot","hide-bottom-space":"",ref:"messageInput"},null,8,["modelValue","rules"])])),_:1},512)]),(0,a.Wm)(Z,{dense:"",onClick:e.onClickSend,label:"전송",color:"primary"},null,8,["onClick"])])])}var q=o(6115),S=o(4554),_=o(8825),k=o(1959);const $=(0,a.aZ)({props:{modelValue:{required:!0},placeholder:{type:String,default:""},readonly:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},inputClass:{type:String,default:""},inputStyle:{type:String,default:""},tabindex:{type:Number,default:0},clearable:{type:Boolean,default:!1},type:{type:String}},emits:["update:modelValue","clear","keydown"],setup(e,{emit:t,slots:o}){const l=(0,_.Z)(),s=(0,k.iH)(e.modelValue),r=(0,k.iH)(null),n={},i=(0,k.iH)(null),d=(0,k.iH)(!1),u=(0,a.h)(S.Z,{name:l.iconSet.field.error,color:"negative"}),c=(0,a.h)(S.Z,{name:l.iconSet.field.clear,class:"q-field__focusable-action",type:"button",tag:"button",role:null,"aria-hidden":null,onClick:p});function m(e){t("update:modelValue",e.target.value)}function p(o){var l,s;!1!==o.cancelable&&o.preventDefault(),o.stopPropagation(),null===(l=i.value)||void 0===l||l.blur(),null===(s=i.value)||void 0===s||s.resetValidation(),t("update:modelValue",null),t("clear",e.modelValue),(0,a.Y3)((()=>{var e,t;null===(e=i.value)||void 0===e||e.resetValidation(),null===(t=r.value)||void 0===t||t.focus()}))}return n.append=()=>[e.clearable&&e.modelValue?c:null,d.value?u:null].filter((e=>null!==e)),(0,a.Y3)((()=>{(0,a.YP)((()=>{var e;return null===(e=i.value)||void 0===e?void 0:e.hasError}),(e=>{d.value=e}),{deep:!0})})),Object.keys(o).forEach((e=>{const t=o[e];"append"===e?n[e]().unshift((0,a.h)(void 0!==t?t:{})):void 0!==t&&(n[e]=()=>(0,a.h)(void 0!==t?t:{}))})),(0,a.YP)((()=>e.modelValue),(e=>r.value.value=e),{deep:!0}),()=>(0,a.h)(q.Z,Object.assign(Object.assign({ref:i},e),{noErrorIcon:!0,clearable:!1}),Object.assign({control:()=>(0,a.h)("textarea"===e.type?"textarea":"input",{type:"text","model-value":s.value,onInput:e=>m(e),class:`${"textarea"===e.type?"q-field__native":"q-field__input"} q-placeholder ${e.inputClass}`,rows:"textarea"===e.type?6:void 0,style:`${e.inputStyle}`,placeholder:e.placeholder,readonly:e.readonly,disabled:e.disable,tabindex:e.tabindex,ref:r,onBlur:()=>{var e;null===(e=i.value)||void 0===e||e.validate()},onKeydown:e=>t("keydown",e)})},n))}});var x=o(6114);const C=(0,a.aZ)({components:{IMEInput:$},data(){return{message:""}},created(){const e=setInterval((()=>{this.$store.getters["StompModule/getConnectStatus"]&&(clearInterval(e),this.$store.dispatch("StompModule/SubscribeUserInfo",this.$route.params.roomId),this.$store.dispatch("StompModule/SubscribeRoom",this.$route.params.roomId))}),1e3)},computed:{dataList:function(){return this.$store.getters["StompModule/getChatList"]},userInfo:function(){return this.$store.getters["StompModule/getUserInfo"]}},mounted(){this.$store.watch(((e,t)=>t["StompModule/getChatList"]),((e,t)=>{const o=document.querySelector(".chat-box");null===o||void 0===o||o.scrollTo(0,o.scrollHeight)}),{deep:!0}),window.addEventListener("beforeunload",this.leave)},methods:{onClickSend(){this.$refs.messageForm.validate().then((e=>{e&&(this.$store.dispatch("StompModule/sendMsgRoom",{message:this.$data.message,chatRoomId:this.$route.params.roomId}),this.$data.message="")}))},leave(e){x.ZY&&this.$store.dispatch("StompModule/UnSubscribeYacht"),this.$store.dispatch("StompModule/UnSubscribeRoom"),this.$store.dispatch("StompModule/UnSubscribeUserInfo"),this.$store.commit("StompModule/setCurrenRoomState",null)}},beforeRouteLeave(e,t,o){x.ZY&&this.$store.dispatch("StompModule/UnSubscribeYacht"),this.$store.dispatch("StompModule/UnSubscribeRoom"),this.$store.dispatch("StompModule/UnSubscribeUserInfo"),this.$store.commit("StompModule/setCurrenRoomState",null),o()},beforeUnmount(){window.removeEventListener("beforeunload",this.leave)}});var Z=o(4260),I=o(8240),W=o(811),M=o(7011),L=o(6332),Q=o(2035),V=o(151),R=o(5589),U=o(5269),E=o(7518),Y=o.n(E);const j=(0,Z.Z)(C,[["render",y]]),D=j;Y()(C,"components",{QBtn:I.Z,QMenu:W.Z,QList:M.Z,QItem:L.Z,QItemSection:Q.Z,QCard:V.Z,QCardSection:R.Z,QForm:U.Z})},2808:(e,t,o)=>{o.d(t,{Z:()=>b});var a=o(3673),l=o(2323),s=o(8880);const r={class:"flex items-center justify-end q-gutter-x-md fs-130"};function n(e,t,o,n,i,d){const u=(0,a.up)("q-item-section"),c=(0,a.up)("q-icon"),m=(0,a.up)("q-btn"),p=(0,a.up)("q-item"),h=(0,a.up)("q-separator"),v=(0,a.up)("q-list");return(0,a.wg)(),(0,a.j4)(v,{bordered:"",separator:"",class:"full-height"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.dataList.length?e.dataList:e.dataAPIList,((t,o)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:`roomId-${t.id}`},[(0,a.Wm)(p,{clickable:"",onClick:o=>e.onClickRoom(o,t)},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"ell_wrap text-weight-bold"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(t.chatRoomName),1)])),_:2},1024),(0,a.Wm)(u,{side:""},{default:(0,a.w5)((()=>[(0,a._)("div",r,[(0,a._)("span",null,["YACHT"===e.roomType?((0,a.wg)(),(0,a.j4)(c,{key:0,name:"casino",color:"일반"===t.status?e.$q.dark.isActive?"grey-9":"grey-4":""},null,8,["color"])):(0,a.kq)("",!0)]),(0,a._)("span",null,[(0,a.Wm)(c,{name:t.private?"lock":"mdi-lock-open-variant",color:t.private?"":e.$q.dark.isActive?"grey-9":"grey-4"},null,8,["name","color"])]),(0,a._)("span",null,[(0,a.Wm)(c,{name:"people"}),(0,a.Uk)(" "+(0,l.zw)(t.userCount),1)]),(0,a.Wm)(m,{color:"red",icon:"delete",onClick:(0,s.iM)((o=>e.onClickRemove(t)),["stop","prevent"]),dense:""},null,8,["onClick"])])])),_:2},1024)])),_:2},1032,["onClick"]),e.dataList.length===o+1?((0,a.wg)(),(0,a.j4)(h,{key:0})):(0,a.kq)("",!0)],64)))),128))])),_:1})}const i=(0,a.aZ)({name:"RoomList",props:{roomType:{type:String,validator:e=>["GENERAL","YACHT"].includes(e)}},data(){return{dataAPIList:[]}},computed:{dataList:function(){return this.$store.getters["StompModule/"+("GENERAL"===this.$props.roomType?"getRoomListData":"getYachtListData")]}},methods:{onClickRoom(e,t){this.$emit("update:room",t)},onClickRemove(e){this.$emit("remove:room",e)}}});var d=o(4260),u=o(7011),c=o(6332),m=o(2035),p=o(4554),h=o(8240),v=o(5869),f=o(7518),g=o.n(f);const w=(0,d.Z)(i,[["render",n]]),b=w;g()(i,"components",{QList:u.Z,QItem:c.Z,QItemSection:m.Z,QIcon:p.Z,QBtn:h.Z,QSeparator:v.Z})},9809:(e,t,o)=>{o.d(t,{Z:()=>x});var a=o(3673);const l=(0,a._)("div",null,"방 만들기",-1),s={class:"relative-position"},r=(0,a._)("div",{class:"text-bold small-font essentials"},"방 이름",-1),n={class:"relative-position"},i={class:"text-bold small-font flex items-center q-gutter-x-sm"},d=(0,a._)("div",null," 비밀방 ",-1);function u(e,t,o,u,c,m){const p=(0,a.up)("q-icon"),h=(0,a.up)("q-card-section"),v=(0,a.up)("q-separator"),f=(0,a.up)("q-input"),g=(0,a.up)("q-checkbox"),w=(0,a.up)("q-btn"),b=(0,a.up)("q-card"),y=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(y,{ref:"dialog",seamless:!1},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{class:"min-width-600px"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{class:"flex justify-between items-center q-py-sm text-h6"},{default:(0,a.w5)((()=>[l,(0,a.Wm)(p,{name:"clear",class:"cursor-pointer",size:"32px",onClick:t[0]||(t[0]=t=>e.hide())})])),_:1}),(0,a.Wm)(v),(0,a.Wm)(h,{class:"q-gutter-y-md"},{default:(0,a.w5)((()=>[(0,a._)("div",s,[r,(0,a.Wm)(f,{dense:"",square:"",outlined:"",modelValue:e.roomTitle,"onUpdate:modelValue":t[1]||(t[1]=t=>e.roomTitle=t),rules:[e=>!!e&&!!e.trim()||""],class:"hideErrorMessageSlot","hide-bottom-space":""},null,8,["modelValue","rules"])]),(0,a._)("div",n,[(0,a._)("div",i,[d,(0,a.Wm)(g,{dense:"",square:"",outlined:"",modelValue:e.$data.private,"onUpdate:modelValue":[t[2]||(t[2]=t=>e.$data.private=t),t[3]||(t[3]=()=>e.password="")]},null,8,["modelValue"])]),e.$data.private?((0,a.wg)(),(0,a.j4)(f,{key:0,dense:"",square:"",outlined:"",modelValue:e.password,"onUpdate:modelValue":t[4]||(t[4]=t=>e.password=t),placeholder:"비밀번호"},null,8,["modelValue"])):(0,a.kq)("",!0)])])),_:1}),(0,a.Wm)(v),(0,a.Wm)(h,{class:"text-right q-py-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{label:"생성",color:"primary",onClick:t[5]||(t[5]=t=>e.onClickSubmit())})])),_:1})])),_:1})])),_:1},512)}var c=o(52),m=o.n(c);const p=(0,a.aZ)({props:{roomType:{type:String,validator:e=>["GENERAL","YAHTZEE"].includes(e),default:"GENERAL"}},data(){return{roomTitle:"",private:!1,password:""}},methods:{show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onClickSubmit(){m().put("chatroom",{roomName:this.roomTitle,password:this.password||null,type:this.$props.roomType}).then((({status:e})=>{200===e?this.hide():alert("실패! 다시 시도해주세요.")}))}}});var h=o(4260),v=o(4390),f=o(151),g=o(5589),w=o(4554),b=o(5869),y=o(8104),q=o(5735),S=o(8240),_=o(7518),k=o.n(_);const $=(0,h.Z)(p,[["render",u]]),x=$;k()(p,"components",{QDialog:v.Z,QCard:f.Z,QCardSection:g.Z,QIcon:w.Z,QSeparator:b.Z,QInput:y.Z,QCheckbox:q.Z,QBtn:S.Z})}}]);